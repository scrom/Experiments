<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>MVTA - Watcher</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/main.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
        <script type="text/javascript" src="js/client/main.js"></script>
        <script type="text/javascript" src="js/client-watcher/client.js"></script>
        <script type="text/javascript" src="js/client-watcher/ui.js"></script>
        <script type="text/javascript" src="js/client/response.js"></script>
    </head>
    <body>
        <header id="page_header">
        Minimum Viable Text Adventure - Watcher Console
        </header>
        <div id ="spacer1" class="spacer"></div>
        <section id ="main">
	        <div id = "interaction" class="softBorder smallBox verticalScroll"></div>
            <div id ="spacer2" class="spacer"></div>
	        <div id="current_state" class="softBorder oneLineBox verticalScroll"></div>  
            <div id ="spacer3" class="spacer"></div>
            <div id="user_input" class="softBorder bigBox">
                <form method="post" id="form">
                    <input type="hidden" name="object" value="location" id="object">
                    <i>Location Definition</i><br />
                    Name:<input type="text" name="name" id="name" size="85">
                    Is Dark?:<input type="checkbox" value="true" name="dark" id="dark">
                    <input type="submit" name="submit" value="Submit" id="submit">
                    <br />
                    Description:<br /><textarea rows="8" cols="95" wrap="soft" name="description" id="description"></textarea>
                    Links <select name="directions" id="directions"><option selected></option></select>to:<select name="links" id="links"><option selected></option></select>
                </form>   	    
	        </div> 
        
            <div id="server_events">
                <hr>    
	        </div>  
	    
	        <section id = "game_console">
	    	    <hr>
	        </section>
	    </section>	    
	    <footer id="page_footer">
	        <hr>
	    </footer>
	    
	    <script type="text/javascript">
            //initialise game UI - pass doc structures
	        init($("#current_state"), $("#input"), $("#interaction"), $("#server_events"), $("#game_console"), $("#form"));
	        //handle form submit
	        $("#form").submit(function (event) {
	            event.preventDefault();
	            client.submit($("#form"));
	        });

	        client.getData('locations', $("#links"));
	        client.getData('directions', $("#directions"));

	        client.filterLocationOptions($("#directions").val(), $("#links").val(), $("#links"));

	        $(function () {
	            $("#directions").change(function () {
	                client.filterLocationOptions($("#directions").val(), $("#links").val(), $("#links"));
	            });
	        });
	        
		</script> 
    </body>
</html>
